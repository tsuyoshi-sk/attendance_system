# 勤怠管理システム環境設定
# 本番環境（ENVIRONMENT=production）では JWT_SECRET_KEY / IDM_HASH_SECRET を
# 強力なランダム値に必ず上書きし、デフォルト値のまま起動しないでください。

# ====================
# セキュリティ設定（必須）
# ====================
# JWT認証用の秘密鍵（本番では64文字以上のランダム値を必ず設定）
# 生成方法: python3 -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET_KEY=your-jwt-secret-key-must-be-at-least-64-characters-long-change-in-production-1234567890
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=480  # 8時間
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# アプリケーション秘密鍵（64文字以上必須）
# 生成方法: python3 -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=your-app-secret-key-must-be-at-least-64-characters-long-change-in-production-0987654321

# IDmハッシュ用秘密鍵（本番では64文字以上のランダム値を必ず設定）
# 生成方法: python3 -c "import secrets; print(secrets.token_urlsafe(64))"
IDM_HASH_SECRET=your-idm-hash-secret-key-change-in-production

# ====================
# データベース設定
# ====================
DATABASE_URL=sqlite:///./attendance.db
# PostgreSQL例: postgresql://user:password@localhost:5432/attendance_db
DATABASE_ECHO=false

# ====================
# Redis設定（オプション）
# ====================
REDIS_URL=redis://localhost:6379
REDIS_PREFIX=attendance_system

# ====================
# アプリケーション設定
# ====================
APP_NAME=勤怠管理システム
APP_VERSION=2.0.0
DEBUG=false
ENVIRONMENT=development  # development, staging, production

# ====================
# CORS設定
# ====================
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8000", "http://localhost:5173"]
CORS_CREDENTIALS=true

# ====================
# ログ設定
# ====================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s [%(levelname)s] %(name)s: %(message)s
LOG_DIR=./logs

# ====================
# PaSoRi設定
# ====================
# デバイスタイプ: rcs380, rcs300, mock, auto
PASORI_DEVICE=auto
PASORI_DEVICE_ID=usb:054c:06c1  # RC-S380の場合
# PASORI_DEVICE_ID=usb:054c:0dc9  # RC-S300の場合
PASORI_MOCK_MODE=false
PASORI_TIMEOUT=3

# ====================
# セキュリティヘッダー
# ====================
SECURITY_HEADERS_ENABLED=true

# ====================
# パフォーマンス設定
# ====================
MAX_CONNECTIONS_COUNT=100
MIN_CONNECTIONS_COUNT=10

# ====================
# レート制限設定
# ====================
# 打刻APIのレート制限（回数/分）
# 本番環境では 10/minute を推奨（テスト環境では必要に応じて緩和可能）
# 変更方法: backend/app/api/punch.py の @limiter.limit("10/minute") を編集
# 除外対象: /health, /metrics, /api/v1/admin/* （自動的に除外）
PUNCH_RATE_LIMIT=10/minute

# ====================
# 監視設定
# ====================
ENABLE_MONITORING=true
MONITORING_INTERVAL_SECONDS=60

# ====================
# 労働時間設定
# ====================
WORK_START_TIME=09:00
WORK_END_TIME=18:00
BREAK_START_TIME=12:00
BREAK_END_TIME=13:00

# 時間丸め設定（分）
DAILY_ROUND_MINUTES=15
MONTHLY_ROUND_MINUTES=30

# 時間外手当率
OVERTIME_RATE_NORMAL=1.25
OVERTIME_RATE_LATE=1.50
NIGHT_RATE=1.25
HOLIDAY_RATE=1.35

# ====================
# Slack通知（オプション）
# ====================
SLACK_ENABLED=false
SLACK_TOKEN=
SLACK_CHANNEL=#attendance-alerts

# ====================
# ディレクトリ設定
# ====================
DATA_DIR=./data

# ====================
# その他の設定
# ====================
# CI環境用設定
BYPASS_AUTH=false  # テスト環境でのみtrueに設定
